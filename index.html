<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Mega Sena Pro</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-card: #ffffff;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --border-color: #dee2e6;
            --accent-color: #0d6efd;
            --accent-hover: #0b5ed7;
            --success-color: #198754;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-card: #242424;
            --text-primary: #e9ecef;
            --text-secondary: #adb5bd;
            --border-color: #495057;
            --shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        h1 {
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .theme-toggle {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 25px;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            color: var(--text-primary);
        }

        .tab-btn.active {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .card h2 {
            margin-bottom: 20px;
            color: var(--accent-color);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        select, textarea, input {
            width: 100%;
            padding: 12px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        select:focus, textarea:focus, input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        textarea {
            min-height: 150px;
            font-family: 'Courier New', monospace;
            resize: vertical;
        }

        .btn {
            padding: 12px 24px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .btn:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(13, 110, 253, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-success {
            background: var(--success-color);
        }

        .btn-success:hover {
            background: #157347;
        }

        .numbers-display {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 25px 0;
        }

        .number-ball {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
            animation: popIn 0.5s ease;
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .info-box {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-color);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-color);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .result-item {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid var(--accent-color);
        }

        .result-item.unique {
            border-left-color: var(--success-color);
        }

        .result-item.duplicate {
            border-left-color: var(--danger-color);
        }

        .ranking {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .rank-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 8px;
        }

        .rank-medal {
            font-size: 1.5rem;
            margin-right: 10px;
        }

        .progress-bar {
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-color), var(--success-color));
            transition: width 0.5s ease;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
        }

        .help-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
        }

        input[type="checkbox"] {
            width: auto;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }
            .number-ball {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé∞ Simulador Mega Sena Pro</h1>
            <button class="theme-toggle" onclick="toggleTheme()">üåì</button>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('generator')">üé≤ Gerador</button>
            <button class="tab-btn" onclick="switchTab('analyzer')">üìä Analisador</button>
            <button class="tab-btn" onclick="switchTab('stats')">üìà Estat√≠sticas</button>
        </div>

        <!-- TAB: GERADOR -->
        <div id="generator" class="tab-content active">
            <div class="card">
                <h2>Gerador de Combina√ß√µes √önicas</h2>
                
                <div class="form-group">
                    <label>Estrat√©gia de Gera√ß√£o:</label>
                    <select id="strategy">
                        <option value="avoid_history">üö´ Evitar Hist√≥rico (100% √önico)</option>
                        <option value="least_drawn">üìâ Dezenas Menos Sorteadas</option>
                        <option value="most_drawn">üìà Dezenas Mais Sorteadas</option>
                        <option value="balanced">‚öñÔ∏è Balanceada (Mix de frequ√™ncias)</option>
                        <option value="fibonacci">üî¢ Sequ√™ncia Fibonacci</option>
                        <option value="prime">üî¥ N√∫meros Primos</option>
                        <option value="hot_cold">üî•‚ùÑÔ∏è Quentes e Frios (50/50)</option>
                        <option value="random_weighted">üé≤ Aleat√≥rio Ponderado</option>
                    </select>
                    <p class="help-text" id="strategyHelp">Selecione uma estrat√©gia para ver a descri√ß√£o</p>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="avoidConsecutive">
                    <label for="avoidConsecutive">Evitar n√∫meros consecutivos</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="balanceOddEven">
                    <label for="balanceOddEven">Balancear pares/√≠mpares</label>
                </div>

                <button class="btn btn-success" onclick="generateNumbers()">‚ú® Gerar Combina√ß√£o</button>

                <div id="generatedResult"></div>
            </div>
        </div>

        <!-- TAB: ANALISADOR -->
        <div id="analyzer" class="tab-content">
            <div class="card">
                <h2>Analisador de Jogos</h2>
                
                <div class="form-group">
                    <label>Insira os jogos (um por linha):</label>
                    <textarea id="gamesInput" placeholder="JOAO 05 12 23 34 45 56
MARIA 01 10 20 30 40 50
PEDRO 07 14 21 28 35 42"></textarea>
                    <p class="help-text">Formato: NOME numero1 numero2 numero3 numero4 numero5 numero6</p>
                </div>

                <button class="btn" onclick="analyzeGames()">üîç Analisar Jogos</button>

                <div id="analysisResult"></div>
            </div>
        </div>

        <!-- TAB: ESTAT√çSTICAS -->
        <div id="stats" class="tab-content">
            <div class="card">
                <h2>Estat√≠sticas Globais</h2>
                <div id="statsContent" class="loading">Carregando estat√≠sticas...</div>
            </div>
        </div>
    </div>

    <script>
        let historicalData = [];
        let numberFrequency = {};

        // Carregar dados hist√≥ricos
        async function loadHistoricalData() {
            try {
                const response = await fetch('Todos os resultados da Mega Sena  Rede Loteria.txt');
                const text = await response.text();
                const lines = text.split('\n').slice(1); // Pular cabe√ßalho
                
                historicalData = [];
                numberFrequency = {};
                
                for (let i = 1; i <= 60; i++) {
                    numberFrequency[i] = 0;
                }
                
                lines.forEach(line => {
                    const parts = line.split(',');
                    if (parts.length >= 9) {
                        const numbers = [
                            parseInt(parts[2]),
                            parseInt(parts[3]),
                            parseInt(parts[4]),
                            parseInt(parts[5]),
                            parseInt(parts[6]),
                            parseInt(parts[7])
                        ].filter(n => !isNaN(n) && n >= 1 && n <= 60).sort((a, b) => a - b);
                        
                        if (numbers.length === 6) {
                            historicalData.push(numbers);
                            numbers.forEach(n => numberFrequency[n]++);
                        }
                    }
                });
                
                updateStats();
            } catch (error) {
                console.error('Erro ao carregar dados:', error);
                alert('Erro ao carregar dados hist√≥ricos. Certifique-se de que o arquivo est√° na mesma pasta.');
            }
        }

        // Verificar se combina√ß√£o existe no hist√≥rico
        function combinationExists(numbers) {
            const sorted = [...numbers].sort((a, b) => a - b);
            return historicalData.some(combo => 
                combo.every((n, i) => n === sorted[i])
            );
        }

        // Gerar n√∫meros baseado na estrat√©gia
        function generateNumbers() {
            const strategy = document.getElementById('strategy').value;
            const avoidConsecutive = document.getElementById('avoidConsecutive').checked;
            const balanceOddEven = document.getElementById('balanceOddEven').checked;
            
            let numbers = [];
            let attempts = 0;
            const maxAttempts = 10000;
            
            while (attempts < maxAttempts) {
                numbers = generateByStrategy(strategy);
                
                if (avoidConsecutive && hasConsecutive(numbers)) {
                    attempts++;
                    continue;
                }
                
                if (balanceOddEven && !isBalanced(numbers)) {
                    attempts++;
                    continue;
                }
                
                if (!combinationExists(numbers)) {
                    break;
                }
                attempts++;
            }
            
            if (attempts >= maxAttempts) {
                alert('N√£o foi poss√≠vel gerar uma combina√ß√£o √∫nica com os crit√©rios selecionados. Tente relaxar as restri√ß√µes.');
                return;
            }
            
            displayGenerated(numbers, strategy);
        }

        function generateByStrategy(strategy) {
            let numbers = [];
            
            switch(strategy) {
                case 'avoid_history':
                    numbers = generateRandom();
                    break;
                case 'least_drawn':
                    numbers = generateLeastDrawn();
                    break;
                case 'most_drawn':
                    numbers = generateMostDrawn();
                    break;
                case 'balanced':
                    numbers = generateBalanced();
                    break;
                case 'fibonacci':
                    numbers = generateFibonacci();
                    break;
                case 'prime':
                    numbers = generatePrime();
                    break;
                case 'hot_cold':
                    numbers = generateHotCold();
                    break;
                case 'random_weighted':
                    numbers = generateWeighted();
                    break;
            }
            
            return numbers.sort((a, b) => a - b);
        }

        function generateRandom() {
            const numbers = new Set();
            while (numbers.size < 6) {
                numbers.add(Math.floor(Math.random() * 60) + 1);
            }
            return Array.from(numbers);
        }

        function generateLeastDrawn() {
            const sorted = Object.entries(numberFrequency)
                .sort((a, b) => a[1] - b[1])
                .map(e => parseInt(e[0]));
            
            const numbers = new Set();
            let i = 0;
            while (numbers.size < 6 && i < sorted.length) {
                if (Math.random() > 0.3 || numbers.size < 3) {
                    numbers.add(sorted[i]);
                }
                i++;
            }
            
            while (numbers.size < 6) {
                numbers.add(Math.floor(Math.random() * 60) + 1);
            }
            
            return Array.from(numbers);
        }

        function generateMostDrawn() {
            const sorted = Object.entries(numberFrequency)
                .sort((a, b) => b[1] - a[1])
                .map(e => parseInt(e[0]));
            
            const numbers = new Set();
            let i = 0;
            while (numbers.size < 6 && i < sorted.length) {
                if (Math.random() > 0.3 || numbers.size < 3) {
                    numbers.add(sorted[i]);
                }
                i++;
            }
            
            while (numbers.size < 6) {
                numbers.add(Math.floor(Math.random() * 60) + 1);
            }
            
            return Array.from(numbers);
        }

        function generateBalanced() {
            const sorted = Object.entries(numberFrequency)
                .sort((a, b) => b[1] - a[1])
                .map(e => parseInt(e[0]));
            
            const numbers = new Set();
            numbers.add(sorted[Math.floor(Math.random() * 10)]);
            numbers.add(sorted[sorted.length - 1 - Math.floor(Math.random() * 10)]);
            
            while (numbers.size < 6) {
                numbers.add(Math.floor(Math.random() * 60) + 1);
            }
            
            return Array.from(numbers);
        }

        function generateFibonacci() {
            const fib = [1, 2, 3, 5, 8, 13, 21, 34, 55];
            const numbers = new Set();
            
            fib.forEach(n => {
                if (n <= 60 && numbers.size < 4) {
                    if (Math.random() > 0.4) numbers.add(n);
                }
            });
            
            while (numbers.size < 6) {
                numbers.add(Math.floor(Math.random() * 60) + 1);
            }
            
            return Array.from(numbers);
        }

        function generatePrime() {
            const primes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59];
            const numbers = new Set();
            
            while (numbers.size < 4) {
                numbers.add(primes[Math.floor(Math.random() * primes.length)]);
            }
            
            while (numbers.size < 6) {
                numbers.add(Math.floor(Math.random() * 60) + 1);
            }
            
            return Array.from(numbers);
        }

        function generateHotCold() {
            const sorted = Object.entries(numberFrequency)
                .sort((a, b) => b[1] - a[1])
                .map(e => parseInt(e[0]));
            
            const numbers = new Set();
            
            for (let i = 0; i < 3; i++) {
                numbers.add(sorted[Math.floor(Math.random() * 15)]);
            }
            
            for (let i = 0; i < 3; i++) {
                numbers.add(sorted[sorted.length - 1 - Math.floor(Math.random() * 15)]);
            }
            
            return Array.from(numbers);
        }

        function generateWeighted() {
            const numbers = new Set();
            const total = Object.values(numberFrequency).reduce((a, b) => a + b, 0);
            
            while (numbers.size < 6) {
                let rand = Math.random() * total;
                let sum = 0;
                
                for (let [num, freq] of Object.entries(numberFrequency)) {
                    sum += freq;
                    if (rand <= sum) {
                        numbers.add(parseInt(num));
                        break;
                    }
                }
            }
            
            return Array.from(numbers);
        }

        function hasConsecutive(numbers) {
            const sorted = [...numbers].sort((a, b) => a - b);
            for (let i = 0; i < sorted.length - 1; i++) {
                if (sorted[i + 1] - sorted[i] === 1) return true;
            }
            return false;
        }

        function isBalanced(numbers) {
            const odd = numbers.filter(n => n % 2 === 1).length;
            return odd >= 2 && odd <= 4;
        }

        function displayGenerated(numbers, strategy) {
            const freqs = numbers.map(n => numberFrequency[n] || 0);
            const avgFreq = freqs.reduce((a, b) => a + b, 0) / 6;
            
            const strategyNames = {
                'avoid_history': 'üö´ Evitar Hist√≥rico',
                'least_drawn': 'üìâ Dezenas Menos Sorteadas',
                'most_drawn': 'üìà Dezenas Mais Sorteadas',
                'balanced': '‚öñÔ∏è Balanceada',
                'fibonacci': 'üî¢ Fibonacci',
                'prime': 'üî¥ N√∫meros Primos',
                'hot_cold': 'üî•‚ùÑÔ∏è Quentes e Frios',
                'random_weighted': 'üé≤ Aleat√≥rio Ponderado'
            };
            
            const html = `
                <div class="info-box" style="margin-top: 30px;">
                    <h3>‚úÖ Combina√ß√£o Gerada com Sucesso!</h3>
                    <p><strong>Estrat√©gia:</strong> ${strategyNames[strategy]}</p>
                </div>
                
                <div class="numbers-display">
                    ${numbers.map((n, i) => `
                        <div class="number-ball" style="animation-delay: ${i * 0.1}s">
                            ${String(n).padStart(2, '0')}
                        </div>
                    `).join('')}
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">${freqs.reduce((a, b) => a + b, 0)}</div>
                        <div class="stat-label">Sa√≠das Totais</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${avgFreq.toFixed(1)}</div>
                        <div class="stat-label">M√©dia de Sa√≠das</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${numbers.filter(n => n % 2 === 1).length}</div>
                        <div class="stat-label">N√∫meros √çmpares</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${numbers.filter(n => n % 2 === 0).length}</div>
                        <div class="stat-label">N√∫meros Pares</div>
                    </div>
                </div>
                
                <div class="info-box">
                    <h4>Frequ√™ncia Individual:</h4>
                    ${numbers.map(n => `
                        <p><strong>${String(n).padStart(2, '0')}:</strong> Sorteado ${numberFrequency[n]} vezes</p>
                    `).join('')}
                </div>
            `;
            
            document.getElementById('generatedResult').innerHTML = html;
        }

        // Analisar jogos
        function analyzeGames() {
            const input = document.getElementById('gamesInput').value.trim();
            if (!input) {
                alert('Por favor, insira pelo menos um jogo.');
                return;
            }
            
            const lines = input.split('\n').filter(l => l.trim());
            const results = [];
            
            lines.forEach(line => {
                const parts = line.trim().split(/\s+/);
                if (parts.length < 7) return;
                
                const name = parts[0];
                const numbers = parts.slice(1, 7)
                    .map(n => parseInt(n))
                    .filter(n => !isNaN(n) && n >= 1 && n <= 60)
                    .sort((a, b) => a - b);
                
                if (numbers.length !== 6) return;
                
                const isDuplicate = combinationExists(numbers);
                const freqs = numbers.map(n => numberFrequency[n] || 0);
                const totalFreq = freqs.reduce((a, b) => a + b, 0);
                const avgFreq = totalFreq / 6;
                const variance = freqs.reduce((sum, f) => sum + Math.pow(f - avgFreq, 2), 0) / 6;
                const uniquenessScore = isDuplicate ? 0 : (100 - (avgFreq / Math.max(...Object.values(numberFrequency))) * 100);
                
                results.push({
                    name,
                    numbers,
                    isDuplicate,
                    freqs,
                    totalFreq,
                    avgFreq,
                    variance,
                    uniquenessScore
                });
            });
            
            displayAnalysis(results);
        }

        function displayAnalysis(results) {
            results.sort((a, b) => b.uniquenessScore - a.uniquenessScore);
            
            const medals = ['ü•á', 'ü•à', 'ü•â'];
            
            let html = '<h3>üìä Resultados da An√°lise</h3>';
            
            html += '<div class="ranking">';
            results.forEach((result, index) => {
                const medal = index < 3 ? medals[index] : `${index + 1}¬∫`;
                const statusClass = result.isDuplicate ? 'duplicate' : 'unique';
                const statusText = result.isDuplicate ? '‚ùå J√Å SORTEADO' : '‚úÖ COMBINA√á√ÉO √öNICA';
                
                html += `
                    <div class="result-item ${statusClass}">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h4><span class="rank-medal">${medal}</span>${result.name}</h4>
                            <span style="font-weight: bold; color: ${result.isDuplicate ? 'var(--danger-color)' : 'var(--success-color)'};">
                                ${statusText}
                            </span>
                        </div>
                        
                        <div class="numbers-display" style="justify-content: flex-start; margin: 15px 0;">
                            ${result.numbers.map(n => `
                                <div class="number-ball" style="width: 50px; height: 50px; font-size: 1.2rem;">
                                    ${String(n).padStart(2, '0')}
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value">${result.uniquenessScore.toFixed(1)}</div>
                                <div class="stat-label">Nota de Unicidade</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${result.totalFreq}</div>
                                <div class="stat-label">Sa√≠das Totais</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${result.avgFreq.toFixed(1)}</div>
                                <div class="stat-label">M√©dia de Sa√≠das</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${result.variance.toFixed(1)}</div>
                                <div class="stat-label">Vari√¢ncia</div>
                            </div>
                        </div>
                        
                        <div class="info-box">
                            <h4>Frequ√™ncia por N√∫mero:</h4>
                            ${result.numbers.map((n, i) => `
                                <div>
                                    <strong>${String(n).padStart(2, '0')}:</strong> ${result.freqs[i]} sa√≠das
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: ${(result.freqs[i] / Math.max(...Object.values(numberFrequency))) * 100}%"></div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            
            document.getElementById('analysisResult').innerHTML = html;
        }

        // Atualizar estat√≠sticas
        function updateStats() {
            const sorted = Object.entries(numberFrequency)
                .sort((a, b) => b[1] - a[1]);
            
            const top10 = sorted.slice(0, 10);
            const bottom10 = sorted.slice(-10).reverse();
            
            const html = `
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">${historicalData.length}</div>
                        <div class="stat-label">Sorteios Realizados</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${sorted[0][1]}</div>
                        <div class="stat-label">Maior Frequ√™ncia</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${sorted[sorted.length - 1][1]}</div>
                        <div class="stat-label">Menor Frequ√™ncia</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${(Object.values(numberFrequency).reduce((a,b) => a+b, 0) / 60).toFixed(1)}</div>
                        <div class="stat-label">M√©dia Geral</div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üî• Top 10 - N√∫meros Mais Sorteados</h3>
                    ${top10.map((entry, i) => `
                        <div class="rank-item">
                            <div>
                                <span class="rank-medal">${i < 3 ? ['ü•á','ü•à','ü•â'][i] : `${i+1}¬∫`}</span>
                                <strong>N√∫mero ${String(entry[0]).padStart(2, '0')}</strong>
                            </div>
                            <div>
                                <span style="font-size: 1.2rem; font-weight: bold; color: var(--accent-color);">
                                    ${entry[1]} sa√≠das
                                </span>
                                <div class="progress-bar" style="width: 200px;">
                                    <div class="progress-fill" style="width: ${(entry[1] / sorted[0][1]) * 100}%"></div>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="card">
                    <h3>‚ùÑÔ∏è Top 10 - N√∫meros Menos Sorteados</h3>
                    ${bottom10.map((entry, i) => `
                        <div class="rank-item">
                            <div>
                                <span class="rank-medal">${i+1}¬∫</span>
                                <strong>N√∫mero ${String(entry[0]).padStart(2, '0')}</strong>
                            </div>
                            <div>
                                <span style="font-size: 1.2rem; font-weight: bold; color: var(--text-secondary);">
                                    ${entry[1]} sa√≠das
                                </span>
                                <div class="progress-bar" style="width: 200px;">
                                    <div class="progress-fill" style="width: ${(entry[1] / sorted[0][1]) * 100}%"></div>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            document.getElementById('statsContent').innerHTML = html;
        }

        // Trocar tema
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // Trocar aba
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Atualizar descri√ß√£o da estrat√©gia
        document.getElementById('strategy').addEventListener('change', function(e) {
            const descriptions = {
                'avoid_history': 'Garante 100% de unicidade - nunca foi sorteada antes.',
                'least_drawn': 'Prioriza n√∫meros que sa√≠ram menos vezes (teoria da compensa√ß√£o).',
                'most_drawn': 'Prioriza n√∫meros mais sorteados (padr√£o de frequ√™ncia).',
                'balanced': 'Mistura n√∫meros quentes e frios para equil√≠brio.',
                'fibonacci': 'Usa a sequ√™ncia de Fibonacci (1,2,3,5,8,13,21,34,55).',
                'prime': 'Prioriza n√∫meros primos (teoria matem√°tica).',
                'hot_cold': 'Combina 50% de n√∫meros quentes e 50% de frios.',
                'random_weighted': 'Aleat√≥rio ponderado pela frequ√™ncia hist√≥rica.'
            };
            document.getElementById('strategyHelp').textContent = descriptions[e.target.value];
        });

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            loadHistoricalData();
            
            // Trigger inicial da descri√ß√£o
            document.getElementById('strategy').dispatchEvent(new Event('change'));
        });
    </script>
</body>
</html>
